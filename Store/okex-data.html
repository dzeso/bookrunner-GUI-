<script>

var okexData = {
  state: {
    config: {
      frameTimeMode: "hh:mm",
      },
    index: {
      firstRecord: 0,
      lastRecord: 0,
/* Структура динамически создаваемых данных           
          "dateTime": { 
            { coin: index },
            },
*/   
    },
    futures: {
      groups: {
        this_week: {
          name: "Weekly", 
//          expirationDate: ""
/* Структура динамически создаваемых данных           
          contractMarketPrice: {
            "dateTime": { 
               coin: {
                 "limitHigh": "1030.3",
                 "vol": 276406,
                 "last": 998.05,
                 "sell": 998.05,
                 "buy": 997.61,
                 "unitAmount": 100,
                 "hold_amount": 180178,
                 "contractId": 20170324034,
                 "high": 1049.18,
                 "low": 973.15,
                 "limitLow": "968.1"},
                 },
                 */  
          },
        next_week: {name: "Bi-weekly", 
          },
        quarter: {name: "Quarterly", 
          },
        },
/* Структура динамически создаваемых данных           
          "Группа": {
            "коин": {
              hstData: [ 
                {timestamp: , price: , volMarket: , volTaker:, volMaker:, pnlTaker, pnlMaker} 
                ],
              config: 
                { limitTaker: , limitMaker: , limitTakerMax: , limitMakerMax: , sprdMult: }, -- конфиг читается из файла настройки
              hstBookrunnerActions: [ {timestamp: , action: , parameters: {}} ],
              }
            },
*/            
      coins: [
        {name: 'BTC'},
        {name: 'LTC'},
        {name: 'ETH'},
        {name: 'BCH'},
        {name: 'XRP'},
        {name: 'EOS'},
        ],
      },
    spot: {
      coins: [
        {name: 'BTC', to: 'USDT'},
        {name: 'LTC', to: 'USDT'},
        {name: 'ETH', to: 'USDT'},
        {name: 'BCH', to: 'USDT'},
        {name: 'XRP', to: 'USDT'},
        {name: 'EOS', to: 'USDT'},
        ],
/* Структура динамически создаваемых данных           
          "коин/to": {
            hstData: [ 
              {timestamp: , price: , volMarket: , volTaker:, volMaker: , pnlTaker, pnlMaker} 
              ],
            config: 
              { limitTaker:, limitMaker: , limitTakerMax: , limitMakerMax: , sprdMult: }, -- конфиг читается из файла настройки
            hstBookrunnerActions: [ {timestamp: , action: , parameters: {}} ],
            },
*/               
      }, 
    },
    
  getters: {
       
    okexData (state) {  
//      console.log ("okexData", state);
      return state;
      }, 
    },
    
  mutations: {  
      
    setOkexIndex (state, payload) {
      state.index[payload.time][payload.coin] = payload.index; // заполняем объектную структуру 
//      Vue.set(state.index[payload.time], payload.coin, payload.index);
//      console.log ("setOkexIndex", payload, state.index[payload.time]);
      },
    
    newOkexIndex (state, payload) {
//      state.index[payload.time] = {}; // инициализация объектной структуры (индекс - время) 
      Vue.set(state.index, payload.time, {});
      if (!state.index.firstRecord) state.index.firstRecord = payload.time;
      state.index.lastRecord = payload.time;        
//      console.log ("-----------------  newOkexIndex", payload.time, state.index);
      },
    },
    
  actions: {       
       
     updateOkexIndex ({getters, commit}, payload) {
       if (!getters.okexData.index[payload.time]) {
         commit("newOkexIndex", payload);
//         commit('setObjReactive', getters.okexData.index);
         }
       commit("setOkexIndex", payload);  
       },  
    },
  };
console.log ("store-okex-data started");
</script>